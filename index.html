<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="initial-scale=1.0">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ayajs@1.0.1/build/style.css">
   <!-- <script type="application/javascript"  src="aya.js"></script> -->
   <script type="application/javascript"  src="https://cdn.jsdelivr.net/npm/ayajs@1.1.2/build/aya.js"></script>


   <script src="./src/entities/place.js"></script>
   <script src="./src/entities/transition.js"></script>
   <script src="./src/entities/edge.js"></script>

   <script src="./src/register.js"></script>
   <script src="./src/layout.js"></script>
   <script src="./src/factory.js"></script>
   <script src="./src/component.js"></script>
   
   <title>petri network</title>
</head>

<body >
  <script>
    console.log(aya);
    var aya = new aya.Init(1000, 1000);

      // remove grid from the svg
    aya.box.form.children.map(({child}) =>{
        aya.svg.removeChild(child.c_svg);
	//child.draw();
    });
    Component.initSvgEvents(aya.svg);
    layout.init(30, 60, 1000, 1000);
    try{
	var p = new Component("place", {type: 'end', x:100,y:100});
	var p = new Component("place", {type: 'start', x:180,y:100});
	//     p.comp.shape.form.x = 300;
	//     p.comp.shape.form.y = 200;
	//     p.comp.shape.form.redraw();
	
	//     p.comp.setType("start");
	// //    p.comp.setName("p2");

    var t = new Component('transition', {type:'dummy'});

    //var l = new Component('transition', {direction: 'p2t', src: p.comp.shape.uuid});

    //     l.comp.shape.form.x = 500;
//     l.comp.shape.form.y = 300;
//     l.comp.shape.form.redraw();


//     var l = new Component('transition', {direction: 'p2t', src: p.comp.shape.uuid});

//     l.comp.shape.form.x = 100;
//     l.comp.shape.form.y = 300;
//     l.comp.shape.form.redraw();

    
//    var e = new Edge("p2t", p.shape.uuid, l.shape.uuid);
     //var c = new Place("intermediary");
     
     // var p = new Place("end");
     // var p = new Place("start");
     // var p = new Place("intermediary");

    //var t = new Transition();

    //t.setGate('xor_join');
     //var t = new Transition("foobar", "automatic");
//      var t = new Transition("foobar", "manual");
     //var t = new Transition("foobar", "clock");
     // var t = new Transition("foobar", "event"); 
     //var t = new Transition("foobar", "asub");
     //t.setGate('xor_join');
	//     console.log(t);
    }catch(e){console.log(e);}
    
      document.body.append(aya.svg);
   </script>
</body>
</html>
